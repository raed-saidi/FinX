import{z as i,a as d,b as T,C as x}from"./@zod-2qqdh1cM.js";import{j as t}from"./@radix-D8tIKeo-.js";import{S as O}from"./plus-BjxzjZ9E.js";import{S as R}from"./trash-Dp8wQrEE.js";import{bj as g,aD as F,aI as z,Y as I,Z as $,_ as E,ar as A,a0 as J,B as v,bp as V,ak as k,al as q,am as B,an as D,ao as P,ap as _,I as b,bV as Z}from"./index-rPJfPIfq.js";function H(e){return e.type==="string"}function Y(e){return e.type==="string"&&e.enum!==void 0}function K(e){return e.type==="string"&&!!e.sensitive}function S(e){return e.type==="boolean"}function w(e){return e.type==="object"}function N(e){return e.type==="array"}function M(e){return e.type==="integer"}function U(e){return e.enum?.map(s=>s.toString())||[]}function p(e,s){if(!e.$ref||!s)return e;const n=e.$ref.replace("#/$defs/",""),o=s[n];return o||console.error(`Could not resolve $ref: ${e.$ref}`),o}function G(e,s){return e.title?e.title:z(s)}function de(e,s){const n=Object.entries(e.properties||{}).reduce((o,[a,r])=>{let l="";return r.default?S(r)?l=r.default:w(r)?l=JSON.stringify(r.default):N(r)||g(r.default)?l=r.default:l=r.default.toString():N(r)&&(l=[]),{...o,[a]:l}},{});return s&&Object.entries(s).forEach(([o,a])=>{const r=e.properties?.[o];r&&S(r)?n[o]=a==="True"?!0:a==="False"?!1:!!a:n[o]=g(a)?a.map(l=>F(l)||g(l)?JSON.stringify(l):l):F(a)?JSON.stringify(a):a}),n}function fe(e){const s=Object.keys(e).reduce((n,o)=>(n[o]=i.string().trim().min(1),n),{});return i.object(s)}function me(e){if(!e.properties)return i.object({});const s=e.required||[],n=e.properties,o=Object.keys(n).reduce((a,r)=>{const l=n[r];if(!l)return a;const c=L(r,s);return a[r]=C(l,e.$defs,c),a},{});return i.object(o)}function C(e,s,n,o=!1){let a=y(e,s);if(a.anyOf){const l=a.anyOf.find(c=>c.type!==null);l&&(a=y(l,s))}switch(a.allOf&&(a=y(a.allOf[0],s)),a.type){case"string":return n?i.string().trim():i.string().trim().min(1,"Required");case"boolean":return n?i.union([i.literal(""),i.boolean()]):i.boolean();case"array":{if(o)return n?i.union([i.literal(""),h]):h;const l=i.array(C(a.items||a.prefixItems?.[0]||{},s,!1,!0));return n?l:l.min(1)}case"object":return n?i.union([i.literal(""),h]):h;case"integer":return n?i.union([i.literal(""),i.preprocess(l=>Number(l),i.number().int())]):i.preprocess(l=>Number(l),i.number().int());default:return n?i.union([i.literal(""),i.string()]):i.string().min(1,"Required")}}function L(e,s){return!s.includes(e)}const h=i.string().refine(e=>{try{return JSON.parse(e),!0}catch{return!1}},{message:"Invalid JSON"}).transform(e=>e===""?e:JSON.parse(e));function y(e,s){if(!e.$ref||!s)return e;const n=e.$ref.split("/").pop();return!n||!s[n]?e:s[n]}function Q({schema:e,fieldName:s}){const n=e.description;return n?t.jsx(I,{children:t.jsxs($,{children:[t.jsx(E,{type:"button",children:t.jsx(A,{className:"size-4 shrink-0 fill-theme-text-secondary"})}),t.jsx(J,{className:"z-20 max-w-[400px] bg-theme-surface-primary p-5 text-text-sm text-theme-text-primary",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"w-fit rounded-sm bg-primary-25 px-1 py-0.5 font-mono text-primary-400",children:s}),t.jsx("p",{children:n})]})})]})}):null}function f({label:e,isOptional:s,schema:n,fieldName:o}){return t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("p",{children:[e,!s&&t.jsx("span",{className:"text-theme-text-error","aria-label":"required",children:"*"})]}),n&&o&&t.jsx(Q,{schema:n,fieldName:o})]})}function W({name:e,label:s,isOptional:n,schema:o,definitions:a}){const r=d(),{fields:l,append:c,remove:u}=T({name:e,control:r.control});return t.jsxs("div",{className:"space-y-3",children:[!!s&&t.jsx("label",{className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:o,fieldName:e})}),t.jsx("ul",{className:"space-y-5",children:l.map((j,m)=>t.jsxs("li",{className:"flex w-full items-center gap-4 [&>div]:w-full",children:[t.jsx(le,{isNested:!0,name:`${e}.${m}`,schema:o,isOptional:n,definitions:a}),t.jsxs(v,{className:"h-7 w-7",emphasis:"subtle",size:"sm",type:"button",onClick:()=>u(m),children:[t.jsx(R,{className:"h-5 w-5 fill-primary-900"}),t.jsx("span",{className:"sr-only",children:"remove"})]})]},j.id))}),t.jsxs(v,{className:"h-7 w-7",emphasis:"subtle",type:"button",onClick:()=>c(""),children:[t.jsx(O,{className:"h-5 w-5 fill-primary-900"}),t.jsx("p",{className:"sr-only",children:"Add Item"})]})]})}function X({name:e,isOptional:s,label:n,schema:o}){const a=d(),r=a.formState.errors[e];return t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[!!n&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:n,isOptional:s,schema:o,fieldName:e})}),t.jsx(x,{control:a.control,name:e,render:({field:{onChange:l,value:c,...u}})=>t.jsx(V,{id:e,checked:c,onCheckedChange:j=>l(j),...u})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:r.message?.toString()})]})}function ee({name:e,label:s,isOptional:n,schema:o,enumValues:a}){const r=d(),l=r.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:o,fieldName:e})}),t.jsx(x,{control:r.control,name:e,render:({field:{onChange:c,ref:u,...j}})=>t.jsxs(k,{...j,onValueChange:c,children:[t.jsx(q,{"data-error":l?"true":"false",className:"h-7 max-w-full truncate border border-neutral-300 px-2 text-left text-text-sm data-[error=true]:border-error-500",children:t.jsx(B,{placeholder:"Select Option"})}),t.jsx(D,{children:t.jsx(P,{viewportClassName:"max-h-[300px]",children:a.map(m=>t.jsx(_,{className:"space-x-2",value:m,children:m},m))})})]})}),l&&t.jsx("p",{className:"text-text-sm text-error-500",children:l.message?.toString()})]})}function re({name:e,isOptional:s,label:n,schema:o}){const a=d(),r=a.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!n&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:n,isOptional:s,schema:o,fieldName:e})}),t.jsx(x,{control:a.control,name:e,render:({field:l})=>t.jsx(b,{inputSize:"md",className:"w-full data-[error=true]:border-error-500",id:e,...l,type:"number","data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:r.message?.toString()})]})}function te({name:e,label:s,isOptional:n,schema:o}){const a=d(),r=a.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:o,fieldName:e})}),t.jsx(x,{control:a.control,name:e,render:({field:l})=>t.jsx("textarea",{rows:4,placeholder:"Please paste your JSON",className:Z({inputSize:"md",className:"h-auto w-full resize-none p-1 font-mono data-[error=true]:border-error-500"}),id:e,...l,"data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:r.message?.toString()})]})}function se({name:e,isOptional:s,label:n,schema:o}){const a=d(),r=a.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!n&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:n,isOptional:s,schema:o,fieldName:e})}),t.jsx(x,{control:a.control,name:e,render:({field:l})=>t.jsx(b,{inputSize:"md",className:"w-full data-[error=true]:border-error-500",id:e,...l,"data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:r.message?.toString()})]})}function ne({name:e,label:s,isOptional:n,schema:o}){const a=d(),r=a.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:o,fieldName:e})}),t.jsx(x,{control:a.control,name:e,render:({field:l})=>t.jsx(b,{placeholder:"Use {{<SECRET_NAME>.<SECRET_KEY>}} to reference a secret",inputSize:"md",className:"w-full placeholder:font-mono data-[error=true]:border-error-500",id:e,...l,type:"text","data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:r.message?.toString()})]})}function le({schema:e,name:s,isOptional:n,definitions:o,isNested:a}){let r=p(e,o);a&&r.items&&(r=p(r.items,o)),a&&r.prefixItems&&(r=p(r.prefixItems[0],o));const l=a?"":G(r,s);if(r.anyOf){const c=r.anyOf.find(u=>u.type!==null);if(c){const u=p(c,o);r={...r,...u}}}if(r.allOf){const c=p(r.allOf[0],o);r={...r,...c}}if(Y(r))return t.jsx(ee,{name:s,label:l,schema:r,isOptional:n,enumValues:U(r)});if(K(r))return t.jsx(ne,{name:s,label:l,schema:r,isOptional:n});if(M(r))return t.jsx(re,{name:s,label:l,schema:r,isOptional:n});if(H(r))return t.jsx(se,{name:s,label:l,schema:r,isOptional:n});if(S(r))return t.jsx(X,{name:s,label:l,schema:r,isOptional:n});if(w(r)||N(r)&&a)return t.jsx(te,{name:s,label:l,schema:r,isOptional:n});if(N(r))return t.jsx(W,{definitions:o,name:s,label:l,schema:r,isOptional:n})}export{le as D,de as a,L as b,me as g,fe as z};
