import{j as e}from"./@radix-D8tIKeo-.js";import{C as g}from"./CodeSnippet-CsgVLbdO.js";import{b as k,C as J}from"./CollapsibleCard-Dh8SGpzx.js";import{aG as W,e as c,bg as h,ai as v,C as w,o as $,q as P,t as D,aN as z,bh as H,aO as b,aQ as y,aV as L,a1 as A,aH as U,x as Q}from"./index-rPJfPIfq.js";import{a as C}from"./@monaco-editor-CuNQBT0l.js";import{b as x}from"./@tanstack-nMqraTcu.js";import{a as F}from"./@react-router-D1ODL_Ub.js";import"./json-faker-Df2OsIQx.js";import{J as R}from"./@json-schema-faker-DUTixDph.js";import{N as X,K as N,a as S,b as q,V as G}from"./KeyValue-DsctXRSr.js";import{P as M}from"./pipeline-link-dO1b6Am8.js";import{u as Z,D as B}from"./docker-image-collapsible-CM9eERJI.js";import{E as _}from"./EmptyState-BU9ULL6a.js";import{S as K}from"./stack-info-full-AmYpkNcb.js";import{u as Y}from"./stack-detail-query-BJygs-Bq.js";import"./@elkjs-CmhuJAjY.js";import"./chevron-down-C9YWkVDM.js";import"./@reactflow-DgowYF6H.js";import"./@zod-2qqdh1cM.js";import"./eye-CuzpINsY.js";import"./ComponentIcon-D_yr1vNI.js";import"./bar-chart-square-check-BAWR96En.js";import"./layout-BBB8hotd.js";import"./transform-DsIiQtL0.js";import"./constants-BUlqx9qT.js";function u({Component:s}){const{deploymentId:t}=F(),n=x({...W.detail(t),throwOnError:!0});if(n.isPending)return e.jsx(c,{className:"h-[200px] w-full"});if(n.isError)return null;const r=n.data;return e.jsx(s,{deployment:r})}function O(s){return"*".repeat(Math.min(s.length,10))}function E(s,t){if(!t)return s;const n=O(t);return s.replace(n,t)}function ee(s,t,n){const r=[];n&&r.push(`-H "Authorization: Bearer ${O(n)}"`),r.push('-H "Content-Type: application/json"');const a=r.join(` \\
  `);if(t){const i=h(JSON.stringify(t,null,2).split(`
`).join(`
    `));return`curl -X POST ${s}/invoke \\
  ${a} \\
  -d '{
    "parameters": ${i}
  }'`}return`curl -X POST ${s}/invoke \\
  ${a}`}function te(s,t){if(!t||typeof t!="object"||Array.isArray(t))return`zenml deployment invoke ${h(s)}`;const n=Object.entries(t).map(([r,a])=>{const i=typeof a=="object"&&a!==null,o=JSON.stringify(a),l=i?`'${h(o)}'`:h(o);return`--${r}=${l}`}).join(" ");return`zenml deployment invoke ${h(s)} ${n}`}function se({deploymentId:s,defaultBody:t}){const n=`from zenml.deployers.utils import invoke_deployment

`;let r="";if(t&&typeof t=="object"&&!Array.isArray(t)){const a=Object.entries(t).map(([i,o])=>{const l=JSON.stringify(o);return`    ${i}=${l}`}).join(`,
`);a&&(r=`,
${a}`)}return`${n}response = invoke_deployment(
    deployment_name_or_id="${s}"${r}
)`}function ne(s,t,n){const r=[];n&&r.push(`    "Authorization": "Bearer ${O(n)}"`),r.push('    "Content-Type": "application/json"');const a=r.join(`,
`);if(t){const i=JSON.stringify(t,null,2).split(`
`).map((o,l)=>l===0?o:`    ${o}`).join(`
`);return`const response = await fetch("${s}/invoke", {
  method: "POST",
  headers: {
${a}
  },
  body: JSON.stringify({
    parameters: ${i}
  })
});`}return`const response = await fetch("${s}/invoke", {
  method: "POST",
  headers: {
${a}
  }
});`}function re(){return e.jsx(u,{Component:ae})}function ae({deployment:s}){const[t,n]=C.useState(!0),[r,a]=C.useState("cli"),i=s.resources?.snapshot?.id,o=x({...v.detail(i),enabled:!!i});if(!i)return null;if(o.isPending)return e.jsx(c,{className:"h-[200px] w-full"});if(o.isError)return null;const d=o.data.metadata?.pipeline_spec?.input_schema,f=d?R.generate(d):{},p=s.body?.url,j=s.metadata?.auth_key??void 0;return e.jsxs(w,{open:t,onOpenChange:n,children:[e.jsx($,{className:"flex h-9 items-center gap-[10px]",children:e.jsxs(P,{className:"flex w-full gap-2",children:[e.jsx(k,{open:t}),"Invocation"]})}),e.jsx(D,{className:"space-y-5 border-t border-theme-border-moderate bg-theme-surface-primary px-5 py-3",children:e.jsxs(z,{value:r,onValueChange:a,children:[e.jsxs(H,{children:[e.jsx(b,{className:"flex items-center gap-2 truncate text-text-md",value:"cli",children:e.jsx("span",{children:"CLI"})}),e.jsx(b,{className:"flex items-center gap-2 truncate text-text-md",value:"python",children:e.jsx("span",{children:"Python"})}),!!p&&e.jsx(b,{className:"flex items-center gap-2 truncate text-text-md",value:"curl",children:e.jsx("span",{children:"cURL"})}),!!p&&e.jsx(b,{className:"flex items-center gap-2 truncate text-text-md",value:"ts",children:e.jsx("span",{children:"Typescript"})})]}),e.jsx(y,{className:"m-0 mt-5 border-0 bg-transparent p-0",value:"cli",children:e.jsx(g,{fullWidth:!0,highlightCode:!0,language:"bash",wrap:!0,code:te(s.name,f)})}),e.jsx(y,{className:"m-0 mt-5 border-0 bg-transparent p-0",value:"python",children:e.jsx(g,{fullWidth:!0,highlightCode:!0,language:"python",wrap:!0,code:se({deploymentId:s.id,defaultBody:f})})}),!!p&&e.jsx(y,{className:"m-0 mt-5 border-0 bg-transparent p-0",value:"curl",children:(()=>{const m=ee(p,f,j);return e.jsx(g,{fullWidth:!0,highlightCode:!0,wrap:!0,language:"bash",copyCode:E(m,j),code:m})})()}),!!p&&e.jsx(y,{className:"m-0 mt-5 border-0 bg-transparent p-0",value:"ts",children:(()=>{const m=ne(p,f,j);return e.jsx(g,{fullWidth:!0,wrap:!0,highlightCode:!0,language:"ts",copyCode:E(m,j),code:m})})()})]})})]})}function oe(){return e.jsx(u,{Component:ie})}function ie({deployment:s}){const t=s.resources?.deployer?.id,n=x({...L.componentDetail(t),enabled:!!t});if(!t)return null;if(n.isPending)return e.jsx(c,{className:"h-[200px] w-full"});if(n.isError)return null;const r=n.data;return e.jsx(X,{isInitialOpen:!0,title:"Deployer Configuration",data:r.metadata?.configuration})}function le(){return e.jsx(u,{Component:ce})}function ce({deployment:s}){const[t,n]=C.useState(!0),r=s.id,a=s.resources?.snapshot,i=a?.id,o=a?.name,l=s.resources?.pipeline?.id,d=s.resources?.pipeline?.name;return e.jsxs(w,{open:t,onOpenChange:n,children:[e.jsx($,{className:"flex h-9 items-center gap-[10px]",children:e.jsxs(P,{className:"flex w-full gap-2",children:[e.jsx(k,{open:t}),"Details"]})}),e.jsx(D,{className:"border-t border-theme-border-moderate bg-theme-surface-primary px-5 py-3",children:e.jsxs("dl",{className:"grid grid-cols-1 gap-x-[10px] gap-y-2 md:grid-cols-3 md:gap-y-4",children:[e.jsx(N,{label:"Id",value:e.jsxs("div",{className:"group/copybutton flex items-center gap-0.5",children:[r,e.jsx(A,{copyText:r})]})}),e.jsx(N,{label:"Snapshot",value:i&&o?e.jsx(U,{snapshotId:i,snapshotName:o}):e.jsx(S,{})}),e.jsx(q,{className:"h-auto",children:"Pipeline"}),e.jsx(G,{className:"h-auto",children:l&&d?e.jsx(M,{pipelineId:l,pipelineName:d}):e.jsx(S,{})})]})})]})}function I({title:s,subtitle:t}){return e.jsx(_,{className:"p-5",icon:e.jsx(Q,{className:"h-[60px] w-[60px] fill-neutral-300"}),children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-text-lg font-semibold",children:s}),t&&e.jsx("p",{className:"text-text-md text-theme-text-secondary",children:t})]})})}function pe(){return e.jsx(u,{Component:ue})}function ue({deployment:s}){const t=s.resources?.snapshot?.id,n=x(v.detail(t)),r=n.data?.resources?.build?.id,a=Z({buildId:r},{enabled:!!r});if(!t)return null;if(n.isPending)return e.jsx(c,{className:"h-[200px] w-full"});if(n.isError)return e.jsx("div",{children:e.jsx(I,{title:"Unable to get the docker build",subtitle:"Something went wrong fetching the snapshot"})});if(!r)return null;if(a.isPending)return e.jsx(c,{className:"h-[200px] w-full"});if(a.isError)return e.jsx("div",{children:e.jsx(I,{title:"Unable to get the docker build",subtitle:"Something went wrong fetching the build"})});const o=a.data.metadata?.images?.deployer;return o?e.jsx(B,{displayCopyButton:!1,data:o}):null}function de(){return e.jsx(u,{Component:me})}function me({deployment:s}){const[t,n]=C.useState(!0),r=s.body?.url;return e.jsxs(w,{open:t,onOpenChange:n,children:[e.jsx($,{className:"flex h-9 items-center gap-[10px]",children:e.jsxs(P,{className:"flex w-full gap-2",children:[e.jsx(k,{open:t}),"Endpoint"]})}),e.jsx(D,{className:"border-t border-theme-border-moderate bg-theme-surface-primary px-5 py-3",children:e.jsx("dl",{className:"grid grid-cols-1 gap-x-[10px] gap-y-2 md:grid-cols-3 md:gap-y-4",children:e.jsx(N,{label:"Endpoint",value:r?e.jsxs("div",{className:"group/copybutton flex items-center gap-0.5",children:[e.jsx("a",{className:"link truncate",href:r,target:"_blank",rel:"noopener noreferrer",children:r}),e.jsx(A,{copyText:r})]}):e.jsx(S,{})})})})]})}function he(){return e.jsx(u,{Component:xe})}function xe({deployment:s}){const t=s.resources?.snapshot;return t?e.jsx(fe,{snapshotId:t.id}):e.jsx(V,{})}function fe({snapshotId:s}){const t=x({...v.detail(s)});if(t.isPending)return e.jsx(c,{className:"h-[200px] w-full"});if(t.isError)return e.jsx(T,{title:"Unable to get Stack",subtitle:"Something went wrong fetching the deployment snapshot"});const n=t.data?.resources?.stack?.id;return n?e.jsx(je,{snapshot:t.data,stackId:n}):e.jsx(V,{})}function je({snapshot:s,stackId:t}){const n=Y({stackId:t});if(n.isPending)return e.jsx(c,{className:"h-[200px] w-full"});if(n.isError)return e.jsx(T,{title:"Failed to fetch the stack",subtitle:"Something went wrong fetching the stack"});const r=n.data,a=s.metadata?.pipeline_configuration.settings||{};return e.jsx(K,{stack:r,objectConfig:a})}function T({title:s,subtitle:t}){return e.jsx(J,{title:"Stack",initialOpen:!0,children:e.jsx(_,{className:"p-5",icon:e.jsx(Q,{className:"h-[60px] w-[60px] fill-neutral-300"}),children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-text-lg font-semibold",children:s}),t&&e.jsx("p",{className:"text-text-md text-theme-text-secondary",children:t})]})})})}function V(){return e.jsx(T,{title:"No Stack",subtitle:"There is no stack associated with this deployment."})}function Ue(){return e.jsxs("div",{className:"grid grid-cols-1 gap-5 p-5 lg:grid-cols-2 lg:px-[80px]",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsx(de,{}),e.jsx(re,{}),e.jsx(le,{}),e.jsx(oe,{})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(he,{}),e.jsx(pe,{})]})]})}export{Ue as default};
